import{G as Z,S as ee,A as te,V as g,H as oe,D as ie,T as ne,a as j,M as _,B as se,b as U,c as ae,d as re,e as le,P as ce,W as de,C as ue,F as he,f as fe,g as me,L as pe,h as ge,i as ye,j as ve}from"./vendor-BDAIQbeQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();function we(e,t,i,r,o,n){const s=new Z(i);let l,f,S,G,N,W,q;s.load(r,function(I){l=I.scene,e.add(l),l.scale.set(o,o,o),l.position.set(n.x,n.y,n.z),l.rotation.set(0,0,0),l.traverse(function(u){u.isMesh&&(u.castShadow=!0)}),S=new ee(l),S.visible=!1,e.add(S);const v=I.animations;f=new te(l),v.forEach(u=>{f.clipAction(u).play()}),G=f.clipAction(v[0]),N=f.clipAction(v[2]),W=f.clipAction(v[1]),q=[G,N,W]});function K(){return f}function Q(I){const v=l.position;l.position.copy(I);const u=new g(n.x,n.y,n.z);if(l.getWorldPosition(u),v.z!=l.position.z){const D=l.rotation;l.rotation.set(D.x,D.y,D.z*1.1)}t.position.set(u.x,u.y+2,u.z+10),t.lookAt(u)}return{getMixer:K,skeleton:S,actions:q,updatePosition:Q}}function c(e,t,i,r){const o=new ae,n=200;for(let s=0;s<n;s++){const l=new U(new j(Math.random()*1.2,16,16),new _({color:16777215,transparent:!0,opacity:Math.random()*.6}));l.position.set(t+Math.random()*6,i+Math.random()*6,r+Math.random()*6),o.add(l)}e.add(o)}function Ee(e,t,i,r,o){const s=new ne(e).load(t),l=new j(i,r,o),f=new _({map:s,side:se});return new U(l,f)}function be(e){const t=new oe(16777215,9276813,3);t.position.set(0,20,200),e.add(t);const i=new ie(16777215,3);i.position.set(-3,10,190),i.castShadow=!0,i.shadow.camera.top=2,i.shadow.camera.bottom=-2,i.shadow.camera.left=-2,i.shadow.camera.right=2,i.shadow.camera.near=.1,i.shadow.camera.far=40,e.add(i)}function P(e,t,i,r,o){const n=new re;n.text=i,n.fontSize=.8,n.font="font/Georgia.woff",n.position.copy(r),n.color=0,n.sync(),e.add(n);function s(){n&&(n.material.opacity=Math.max(0,1-Math.abs(t.position.z-10-n.position.z)/(o&&o>0?o:20)))}return{updateTextOpacity:s}}class Le{audio;isInitialized=!1;soundIcon;isPlaying=!1;isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}constructor(){this.audio=document.getElementById("bgMusic"),this.audio.volume=.3,this.audio.preload="auto",this.isIOS()?(console.log("iOS device detected, using iOS-specific initialization"),this.audio.playsInline=!0,this.audio.muted=!0):console.log("Non-iOS device detected, using standard initialization"),this.soundIcon=document.getElementById("soundIcon"),this.setupToggleButton()}initIOSAudio(){const t=()=>{this.isInitialized||(this.audio.muted=!1,this.audio.play().then(()=>{this.isInitialized=!0,console.log("iOS audio started successfully")}).catch(i=>{console.log("iOS audio start failed:",i),this.isInitialized=!1}))};document.addEventListener("touchend",()=>{this.isInitialized||t()},!1)}initStandardAudio(){const t=()=>{this.isInitialized||this.audio.play().then(()=>{this.isInitialized=!0,console.log("Standard audio started successfully")}).catch(i=>{console.log("Standard audio start failed:",i),this.isInitialized=!1})};["click","touchstart"].forEach(i=>{document.addEventListener(i,t,{once:!0})})}stop(){this.isInitialized&&(this.audio.pause(),this.audio.currentTime=0)}setupToggleButton(){const t=document.getElementById("toggleAudio");t&&t.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),this.toggle()})}toggle(){this.isPlaying?this.pause():this.play(),this.updateIcon()}play(){this.isInitialized||(this.isIOS()?this.initIOSAudio():this.initStandardAudio()),this.audio.play().then(()=>{this.isPlaying=!0,this.updateIcon()}).catch(t=>console.log("Audio play failed:",t))}pause(){this.audio.pause(),this.isPlaying=!1,this.updateIcon()}updateIcon(){if(this.soundIcon){const t=this.isPlaying?"sound-on.svg":"sound-off.svg";this.soundIcon.src=`images/${t}`}}setVolume(t){this.audio.volume=Math.max(0,Math.min(1,t))}logAudioState(){console.log({isIOS:this.isIOS(),isInitialized:this.isInitialized,isMuted:this.audio.muted,volume:this.audio.volume,isPlaying:!this.audio.paused,currentTime:this.audio.currentTime,readyState:this.audio.readyState})}}class Me{hamburger;mobileMenu;isHamburgerOpen=!1;constructor(){this.hamburger=document.getElementById("hamburger"),this.mobileMenu=document.getElementById("mobileMenu"),this.initializeMenu()}initializeMenu(){this.hamburger?.addEventListener("click",()=>this.toggleMobileMenu()),document.addEventListener("click",t=>{const i=t.target;this.isHamburgerOpen&&!this.hamburger?.contains(i)&&this.closeMobileMenu()}),window.addEventListener("resize",()=>{window.innerWidth>768&&this.isHamburgerOpen&&this.closeMobileMenu()})}toggleMobileMenu(){this.isHamburgerOpen=!this.isHamburgerOpen,this.mobileMenu?.classList.toggle("active")}closeMobileMenu(){this.isHamburgerOpen=!1,this.mobileMenu?.classList.remove("active")}}const O=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);let k=0,b=0,z;const Se=.95,Ie=.1*.002;let B,a,d,R,E,w;const y=[],H=[],T=[],Pe=new ve;let Y,X=!1,V=!1,M=!1;const h=document.getElementById("threeCanvas"),m=document.getElementById("loader"),$=document.getElementById("loaderImg"),p=document.getElementById("loaderStatus"),L=document.getElementById("startButton"),x=document.getElementById("topLogo"),A=[[0,0,200],[3,0,190],[5,0,180],[3,0,170],[0,3,160],[-3,3,150],[-3,3,140],[0,10,130],[0,10,120],[0,10,110],[0,5,100],[5,5,90],[5,5,80],[3,15,70],[0,15,60],[0,15,50],[-3,20,40],[-3,20,30],[-5,20,20],[-5,20,10],[-1,20,0]];function ke(){if(X){if(m&&$&&x){const e=x.getBoundingClientRect(),t=$.getBoundingClientRect(),i=e.left-t.right-(O?-55:0),r=e.top-t.bottom-(O?-120:60);m.style.opacity="0",m.style.transition="transform 1.5s ease, opacity 1.5s ease",O?m.style.transform=`translate(${i}px, ${r}px) scale(0.6)`:m.style.transform=`translate(${i}px, ${r}px) scale(0.35)`}L&&(L.style.display="none"),h.style.opacity="0",h.style.display="block",h.style.transition="opacity 2s ease",setTimeout(()=>{h.style.opacity="1"},10),setTimeout(()=>{m&&(m.style.display="none"),x&&(x.style.opacity="1")},1e3)}}function xe(){if(Te(),L)L.addEventListener("click",ke);else{console.error("startButton_no");return}a=new le,d=new ce(75,window.innerWidth/window.innerHeight,.1,2e3),E=new de({canvas:h,antialias:!0,powerPreference:"high-performance"}),E.shadowMap.enabled=!0,w=new ue,w.setSize(window.innerWidth,window.innerHeight),w.domElement.id="css3d-container",F(),document.body.appendChild(E.domElement),document.body.appendChild(w.domElement),B=new ye(()=>{De(),X=!0,console.log("Loading complete!"),setTimeout(function(){L.style.display="block",p&&(p.style.display="none")},500)},(e,t,i)=>{p&&(p.style.display="block"),console.log(`Loading file.
Loaded `+t+" of "+i+" files.")},e=>{p&&(p.style.display="block",p.textContent="Dronu sa nepodarilo vzlietnuť. Skúste refresh!"),console.error("There was an error loading")}),Oe()}function F(){const e=window.innerWidth,t=window.innerHeight;d.fov=O?80:75,d.aspect=e/t,d.updateProjectionMatrix(),E.setSize(e,t,!1),w.setSize(e,t);const i=Math.min(window.devicePixelRatio,2);E.setPixelRatio(i)}function Ae(){window.addEventListener("resize",F),window.addEventListener("orientationchange",()=>{setTimeout(F,100)}),window.addEventListener("wheel",o=>{M||(b+=o.deltaY*Ie)}),document.addEventListener("touchmove",o=>{o.preventDefault()},{passive:!1}),window.addEventListener("contextmenu",o=>{o.preventDefault()}),h?.addEventListener("touchmove",o=>{o.preventDefault()},{passive:!1}),document.querySelectorAll("nav a, .logo, .about-link").forEach(o=>{o.addEventListener("touchstart",n=>{n.stopPropagation()},{passive:!0})});let t=0,i=!1;const r=.001;h?.addEventListener("touchstart",o=>{o.preventDefault(),t=o.touches[0].clientY,i=!0},{passive:!1}),h?.addEventListener("touchmove",o=>{o.preventDefault();const n=o.touches[0].clientY,s=n-t;i&&!M&&(s>0||s<0)&&(b-=s*r),t=n},{passive:!1}),h?.addEventListener("touchend",o=>{o.preventDefault(),i=!1},{passive:!1}),h?.addEventListener("touchcancel",o=>{o.preventDefault(),i=!1},{passive:!1})}function Oe(){be(a);const e=Ee(B,"textures/sunshine-clouds-min.jpg",1350,900,500);a.add(e);const t=new g(0,0,200);Ye(a,d,t),R=we(a,d,B,"models/drone6.glb",3,t),T.push(R),c(a,-15,0,190),c(a,-10,0,160),c(a,30,5,140),c(a,30,0,140),c(a,20,10,120),c(a,10,0,110),c(a,-20,0,100),c(a,-10,10,90),c(a,30,10,80),c(a,20,5,70),c(a,-10,-5,60),c(a,15,0,40),c(a,10,10,20),c(a,-10,0,20),c(a,0,0,20),c(a,-10,-5,20),c(a,5,5,20),new he(B),y.push(P(a,d,"Scroll to begin your jorney",new g(-5,3,197),7)),y.push(P(a,d,`Videoprodukcia
príbehy, ktoré Vás vtiahnu do deja`,new g(-1,4,180),10)),y.push(P(a,d,`Fotografovanie
momenty, ktoré hovoria za vás`,new g(-8,5,150),10)),y.push(P(a,d,`Letecké zábery dronom
pohľad, ktorý mení perspektívu`,new g(-5,15,120),10))}function ze(){Y=new Le;const e=()=>{Y.play(),["click","touchstart","scroll","wheel"].forEach(t=>{document.removeEventListener(t,e)})};["click","touchstart","scroll","wheel"].forEach(t=>{document.addEventListener(t,e)})}async function C(e,t,i,r){e.id="subpage-"+r,e.classList.add("subpage-container");try{const l=await(await fetch("pages/"+t+".html")).text();e.innerHTML=l}catch(s){console.error("Nepodarilo sa načítať subpage: "+t,s),e.innerHTML="<div>Nepodarilo sa načítať obsah</div>"}document.body.appendChild(e);const o=s=>{const l=s.target;!e.contains(l)&&!l.closest("#"+r)&&(e.style.transform="translateY(100vh)",M=!1,setTimeout(()=>{document.body.style.overflow="auto"},500),document.removeEventListener("click",o))},n=document.getElementById(i);return n&&n.addEventListener("click",()=>{e.style.transform="translateY(100vh)",M=!1,setTimeout(()=>{document.body.style.overflow="auto"},500),document.removeEventListener("click",o)}),Be(e,r,o),{subpageContainer:e,closeOnClickOutside:o}}function Be(e,t,i){const r=document.querySelectorAll("#"+t);r&&r.forEach(o=>o.addEventListener("click",n=>{n.preventDefault(),document.querySelectorAll(".subpage-container").forEach(l=>{l.style.transform="translateY(100vh)"}),document.body.style.overflow="hidden",e.style.transform="translateY(0)",M=!0,Y.pause(),document.addEventListener("click",i)}))}async function Te(){new Me;const e=document.createElement("div");await C(e,"portfolio","closePortfolio","portfolio-button");const t=document.createElement("div");await C(t,"klienti","closeKlienti","klienti-button");const i=document.createElement("div");await C(i,"about","closeAbout","about-button")}function De(){Ae(),J(),ze()}function He(){k+=b/100,k=Math.max(0,Math.min(1,k));const e=z.getPointAt(k);R.updatePosition(e),b*=Se,e.z<30&&!V&&(V=!0,document.getElementById("portfolio-button")?.click())}function Ce(){if(y)for(let e=0;e<y.length;e++)y[e].updateTextOpacity();if(H)for(let e=0;e<H.length;e++)H[e].updateOpacity()}function Re(){for(let e=0;e<T.length;e++)T[e].getMixer()&&T[e].getMixer().update(Pe.getDelta())}function J(){requestAnimationFrame(J),He(),Ce(),Re(),E.render(a,d),w.render(a,d)}function Ye(e,t,i){const r=[];for(let s=0;s<A.length;s++)r.push(new g(A[s][0],A[s][1],A[s][2]));z=new fe(r),z.closed=!1;const o=new me().setFromPoints(z.getPoints(100)),n=new pe({color:16776960});new ge(o,n),t.position.set(i.x,i.y+2,i.z),t.lookAt(i)}xe();
