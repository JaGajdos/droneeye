import{G as ee,S as te,A as oe,V as g,H as ne,D as ie,T as se,a as _,M as X,B as ae,b as J,c as re,d as le,e as q,f as ce,P as de,W as ue,C as me,F as he,g as fe,h as pe,L as ge,i as ye,j as ve,k as we}from"./vendor-DgMobbL_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function be(e,t,n,r,o,s){const i=new ee(n);let a,u,w,G,j,N,W;i.load(r,function(k){a=k.scene,e.add(a),a.scale.set(o,o,o),a.position.set(s.x,s.y,s.z),a.rotation.set(0,0,0),a.traverse(function(m){m.isMesh&&(m.castShadow=!0)}),w=new te(a),w.visible=!1,e.add(w);const b=k.animations;u=new oe(a),b.forEach(m=>{u.clipAction(m).play()}),G=u.clipAction(b[0]),j=u.clipAction(b[2]),N=u.clipAction(b[1]),W=[G,j,N]});function Q(){return u}function Z(k){const b=a.position;a.position.copy(k);const m=new g(s.x,s.y,s.z);if(a.getWorldPosition(m),b.z!=a.position.z){const D=a.rotation;a.rotation.set(D.x,D.y,D.z*1.1)}t.position.set(m.x,m.y+2,m.z+10),t.lookAt(m)}return{getMixer:Q,skeleton:w,actions:W,updatePosition:Z}}function c(e,t,n,r){const o=new re,s=200;for(let i=0;i<s;i++){const a=new J(new _(Math.random()*1.2,16,16),new X({color:16777215,transparent:!0,opacity:Math.random()*.6}));a.position.set(t+Math.random()*6,n+Math.random()*6,r+Math.random()*6),o.add(a)}e.add(o)}function Ee(e,t,n,r,o){const i=new se(e).load(t),a=new _(n,r,o),u=new X({map:i,side:ae});return new J(a,u)}function Le(e){const t=new ne(16777215,9276813,3);t.position.set(0,20,200),e.add(t);const n=new ie(16777215,3);n.position.set(-3,10,190),n.castShadow=!0,n.shadow.camera.top=2,n.shadow.camera.bottom=-2,n.shadow.camera.left=-2,n.shadow.camera.right=2,n.shadow.camera.near=.1,n.shadow.camera.far=40,e.add(n)}function I(e,t,n,r,o,s){const i=new le;i.text=n,i.fontSize=.7,i.font="font/Georgia.woff",i.position.copy(r),i.color=0,i.sync(),e.add(i);function a(){i&&(i.material.opacity=Math.max(0,1-Math.abs(t.position.z-(s&&s>0?s:15)-i.position.z)/(o&&o>0?o:20)))}return{updateTextOpacity:a}}class Me{audio;isInitialized=!1;soundIcon;isPlaying=!1;isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}constructor(){this.audio=document.getElementById("bgMusic"),this.audio.volume=.3,this.audio.preload="auto",this.isIOS()?(console.log("iOS device detected, using iOS-specific initialization"),this.audio.playsInline=!0,this.audio.muted=!0):console.log("Non-iOS device detected, using standard initialization"),this.soundIcon=document.getElementById("soundIcon"),this.setupToggleButton()}initIOSAudio(){const t=()=>{this.isInitialized||(this.audio.muted=!1,this.audio.play().then(()=>{this.isInitialized=!0,console.log("iOS audio started successfully")}).catch(n=>{console.log("iOS audio start failed:",n),this.isInitialized=!1}))};document.addEventListener("touchend",()=>{this.isInitialized||t()},!1)}initStandardAudio(){const t=()=>{this.isInitialized||this.audio.play().then(()=>{this.isInitialized=!0,console.log("Standard audio started successfully")}).catch(n=>{console.log("Standard audio start failed:",n),this.isInitialized=!1})};["click","touchstart"].forEach(n=>{document.addEventListener(n,t,{once:!0})})}stop(){this.isInitialized&&(this.audio.pause(),this.audio.currentTime=0)}setupToggleButton(){const t=document.getElementById("toggleAudio");t&&t.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.toggle()})}toggle(){this.isPlaying?this.pause():this.play(),this.updateIcon()}play(){this.isInitialized||(this.isIOS()?this.initIOSAudio():this.initStandardAudio()),this.audio.play().then(()=>{this.isPlaying=!0,this.updateIcon()}).catch(t=>console.log("Audio play failed:",t))}pause(){this.audio.pause(),this.isPlaying=!1,this.updateIcon()}updateIcon(){if(this.soundIcon){const t=this.isPlaying?"sound-on.svg":"sound-off.svg";this.soundIcon.src=`images/${t}`}}setVolume(t){this.audio.volume=Math.max(0,Math.min(1,t))}logAudioState(){console.log({isIOS:this.isIOS(),isInitialized:this.isInitialized,isMuted:this.audio.muted,volume:this.audio.volume,isPlaying:!this.audio.paused,currentTime:this.audio.currentTime,readyState:this.audio.readyState})}}class Se{hamburger;mobileMenu;isHamburgerOpen=!1;constructor(){this.hamburger=document.getElementById("hamburger"),this.mobileMenu=document.getElementById("mobileMenu"),this.initializeMenu()}initializeMenu(){this.hamburger?.addEventListener("click",()=>this.toggleMobileMenu()),document.addEventListener("click",t=>{const n=t.target;this.isHamburgerOpen&&!this.hamburger?.contains(n)&&this.closeMobileMenu()}),window.addEventListener("resize",()=>{window.innerWidth>768&&this.isHamburgerOpen&&this.closeMobileMenu()})}toggleMobileMenu(){this.isHamburgerOpen=!this.isHamburgerOpen,this.mobileMenu?.classList.toggle("active")}closeMobileMenu(){this.isHamburgerOpen=!1,this.mobileMenu?.classList.remove("active")}}function ke(e,t,n,r,o){q.init("SJ0aNKcX728yhsrWb");const s=document.getElementById(n),i=document.getElementById(r),a=document.getElementById(o);s.addEventListener("submit",async u=>{u.preventDefault();try{await q.sendForm(e,t,s),s.reset(),i.innerText="Ďakujeme, čoskoro Vás budeme kontaktovať.",a.innerText=""}catch(w){console.error("Chyba pri odosielaní:",w),a.innerText="Pri odoslaní nastala chyba, prosím skúste ešte raz. Pokiaľ chyba pretrváva prosím kontaktujte nás na email: ...",i.innerText=""}})}const A=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);let x=0,M=0,B;const Ie=.95,xe=.1*.002;let O,l,d,R,L,E;const y=[],C=[],T=[],Pe=new we;let Y,K=!1,V=!1,v=!1;const h=document.getElementById("threeCanvas"),f=document.getElementById("loader"),$=document.getElementById("loaderImg"),p=document.getElementById("loaderStatus"),S=document.getElementById("startButton"),P=document.getElementById("topLogo"),z=[[0,0,200],[3,0,190],[5,0,180],[3,0,170],[0,3,160],[-3,3,150],[-3,3,140],[0,10,130],[0,10,120],[0,10,110],[0,5,100],[5,5,90],[5,5,80],[3,15,70],[0,15,60],[0,15,50],[-3,20,40],[-3,20,30],[-5,20,20],[-5,20,10],[-1,20,0]];function ze(){if(K){if(f&&$&&P){const e=P.getBoundingClientRect(),t=$.getBoundingClientRect(),n=e.left-t.right-(A?-55:0),r=e.top-t.bottom-(A?-120:60);f.style.opacity="0",f.style.transition="transform 1.5s ease, opacity 1.5s ease",A?f.style.transform=`translate(${n}px, ${r}px) scale(0.6)`:f.style.transform=`translate(${n}px, ${r}px) scale(0.35)`}S&&(S.style.display="none"),h.style.opacity="0",h.style.display="block",h.style.transition="opacity 2s ease",setTimeout(()=>{h.style.opacity="1"},10),setTimeout(()=>{f&&(f.style.display="none"),P&&(P.style.opacity="1")},1e3)}}async function Ae(){if(await Ce(),S)S.addEventListener("click",ze);else{console.error("startButton_no");return}l=new ce,d=new de(75,window.innerWidth/window.innerHeight,.1,2e3),L=new ue({canvas:h,antialias:!0,powerPreference:"high-performance"}),L.shadowMap.enabled=!0,E=new me,E.setSize(window.innerWidth,window.innerHeight),E.domElement.id="css3d-container",F(),document.body.appendChild(L.domElement),document.body.appendChild(E.domElement),O=new ve(()=>{He(),K=!0,console.log("Loading complete!"),setTimeout(function(){S.style.display="block",p&&(p.style.display="none")},500)},(e,t,n)=>{p&&(p.style.display="block"),console.log(`Loading file.
Loaded `+t+" of "+n+" files.")},e=>{p&&(p.style.display="block",p.textContent="Dronu sa nepodarilo vzlietnuť. Skúste refresh!"),console.error("There was an error loading")}),Oe()}function F(){const e=window.innerWidth,t=window.innerHeight;d.fov=A?80:75,d.aspect=e/t,d.updateProjectionMatrix(),L.setSize(e,t,!1),E.setSize(e,t);const n=Math.min(window.devicePixelRatio,2);L.setPixelRatio(n)}function Be(){window.addEventListener("resize",F),window.addEventListener("orientationchange",()=>{setTimeout(F,100)}),window.addEventListener("wheel",o=>{v||(M+=o.deltaY*xe)}),document.addEventListener("touchmove",o=>{v||o.preventDefault()},{passive:!1}),window.addEventListener("contextmenu",o=>{o.preventDefault()}),h?.addEventListener("touchmove",o=>{v||o.preventDefault()},{passive:!1}),document.querySelectorAll("nav a, .logo, .about-link").forEach(o=>{o.addEventListener("touchstart",s=>{s.stopPropagation()},{passive:!0})});let t=0,n=!1;const r=.001;h?.addEventListener("touchstart",o=>{o.preventDefault(),t=o.touches[0].clientY,n=!0},{passive:!1}),h?.addEventListener("touchmove",o=>{o.preventDefault();const s=o.touches[0].clientY,i=s-t;n&&!v&&(i>0||i<0)&&(M-=i*r),t=s},{passive:!1}),h?.addEventListener("touchend",o=>{o.preventDefault(),n=!1},{passive:!1}),h?.addEventListener("touchcancel",o=>{o.preventDefault(),n=!1},{passive:!1})}function Oe(){Le(l);const e=Ee(O,"textures/sunshine-clouds-min.jpg",1350,900,500);l.add(e);const t=new g(0,0,200);Ge(l,d,t),R=be(l,d,O,"models/drone6.glb",3,t),T.push(R),c(l,-15,0,190),c(l,-10,0,160),c(l,30,5,140),c(l,30,0,140),c(l,20,10,120),c(l,10,0,110),c(l,-20,0,100),c(l,-10,10,90),c(l,30,10,80),c(l,20,5,70),c(l,-10,-5,60),c(l,15,0,40),c(l,10,10,20),c(l,-10,0,20),c(l,0,0,20),c(l,-10,-5,20),c(l,5,5,20),new he(O),y.push(I(l,d,"Scroll to begin your jorney",new g(-4,3,197),5,13)),y.push(I(l,d,`Videoprodukcia
príbehy, ktoré Vás vtiahnu do deja`,new g(-1,4,180),10)),y.push(I(l,d,`Fotografovanie
momenty, ktoré hovoria za vás`,new g(-7,6,150),10)),y.push(I(l,d,`Letecké zábery dronom
pohľad, ktorý mení perspektívu`,new g(-4,14,120),10))}function Te(){Y=new Me;const e=()=>{Y.play(),["click","touchstart","scroll","wheel"].forEach(t=>{document.removeEventListener(t,e)})};["click","touchstart","scroll","wheel"].forEach(t=>{document.addEventListener(t,e)})}async function H(e,t,n,r){e.id="subpage-"+r,e.classList.add("subpage-container");try{const a=await(await fetch("pages/"+t+".html")).text();e.innerHTML=a}catch(i){console.error("Nepodarilo sa načítať subpage: "+t,i),e.innerHTML="<div>Nepodarilo sa načítať obsah</div>"}document.body.appendChild(e);const o=i=>{const a=i.target;!e.contains(a)&&!a.closest("#"+r)&&(e.style.transform="translateY(100vh)",v=!1,setTimeout(()=>{document.body.style.overflow="auto"},500),document.removeEventListener("click",o))},s=document.getElementById(n);return s&&s.addEventListener("click",()=>{e.style.transform="translateY(100vh)",v=!1,setTimeout(()=>{document.body.style.overflow="auto"},500),document.removeEventListener("click",o)}),De(e,r,o),{subpageContainer:e,closeOnClickOutside:o}}function De(e,t,n){const r=document.querySelectorAll("#"+t);r&&r.forEach(o=>o.addEventListener("click",s=>{s.preventDefault(),document.querySelectorAll(".subpage-container").forEach(a=>{a.style.transform="translateY(100vh)"}),document.body.style.overflow="hidden",e.style.transform="translateY(0)",v=!0,Y.pause(),document.addEventListener("click",n)}))}async function Ce(){new Se;const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");await Promise.all([await H(e,"portfolio","closePortfolio","portfolio-button"),await H(t,"klienti","closeKlienti","klienti-button"),await H(n,"about","closeAbout","about-button")]),ke("service_um8zj4l","template_9tzop5i","contact-form","contact-form-success","contact-form-error"),document.querySelectorAll(".menu-button").forEach((o,s)=>{const i=o;i.style.opacity="0",i.style.transform="translateY(20px)",i.style.transition="opacity 0.5s ease, transform 0.5s ease",i.style.transitionDelay=`${s*.2}s`,setTimeout(()=>{i.style.opacity="1",i.style.transform="translateY(0)"},100)})}function He(){Be(),U(),Te()}function Re(){x+=M/100,x=Math.max(0,Math.min(1,x));const e=B.getPointAt(x);R.updatePosition(e),M*=Ie,e.z<30&&!V&&(V=!0,document.getElementById("portfolio-button")?.click())}function Ye(){if(y)for(let e=0;e<y.length;e++)y[e].updateTextOpacity();if(C)for(let e=0;e<C.length;e++)C[e].updateOpacity()}function Fe(){for(let e=0;e<T.length;e++)T[e].getMixer()&&T[e].getMixer().update(Pe.getDelta())}function U(){requestAnimationFrame(U),Re(),Ye(),Fe(),L.render(l,d),E.render(l,d)}function Ge(e,t,n){const r=[];for(let i=0;i<z.length;i++)r.push(new g(z[i][0],z[i][1],z[i][2]));B=new fe(r),B.closed=!1;const o=new pe().setFromPoints(B.getPoints(100)),s=new ge({color:16776960});new ye(o,s),t.position.set(n.x,n.y+2,n.z),t.lookAt(n)}(async()=>{try{await Ae()}catch(e){console.error("Failed to start application:",e)}})();
